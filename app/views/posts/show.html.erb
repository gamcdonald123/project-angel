<div class="container mt-4">
  <div class="row">
    <div class="col">

        <div class="posts"> <%# This posts class is also used in the communities show view %>

          <p id="title"><%= @post.title %></p>
          <p id="content"><%= @post.content %></p>
              <div class="d-flex justify-content-between">
              <p>Sent by <%= @post.user.first_name %></p>
              <p><%= @post.created_at.strftime("%d %B %Y %H:%M") %> </p>
            </div>

        <div class="d-flex justify-content-start ml-3">

              <%= link_to like_post_path(@post), data: {turbo_method: :patch} do %>
                <div class="icon-btn mr-2" id="like"><%= image_tag 'like_button' %></div>
              <% end %>
              <div class="counter mr-4 mt-2">
                <%= @post.votes_for.size %>
              </div>

            <div data-controller="scroll-down" data-action="click->scroll-down#scrollDown">
              <div class="icon-btn" id="comment"><%= image_tag 'comment' %></div>
            </div>

        </div>

        <div class="line-break"></div>

            <div class="comments-container p-2">
              <% @post.comments.each do |comment| %>
                <div class="text-box-comments">

                  <div class="d-flex justify-content-between">
                    <p><strong><%= comment.user.first_name %> replied:</strong></p>
                    <p><%= comment.created_at.strftime("%d %B %Y %H:%M") %></p>
                  </div>

                    <%= link_to like_post_comment_path(@post, comment), data: {turbo_method: :patch} do %>

                    <p id="content"><%= comment.content.capitalize %></p>

                  <div class="d-flex justify-content-end mb-2">
                    <div class="icon-btn" id="like-response"><%= image_tag 'like_button' %></div>
                    <div class="counter mr-3 mt-1"> <%= comment.votes_for.size %></div>
                  </div>
                  <% end %>
                </div>

             <% end %>
            </div>



          <%= simple_form_for [@post, @comment] do |f| %>
          <div class="container">
            <%= f.input :content, label: false, placeholder: "Add a comment", input_html: { style: "white-space: pre-wrap; height: auto;" } %>
          </div>
            <%= f.submit "Submit", class: "btn btn-dark rounded-4 w-75 ml-5 my-3" %>
          <% end %>

        </div>

        <div class="btn btn-dark rounded-4 w-100 p-2 my-5" id="back_button">
          <p><%= link_to "Back", community_path %></p>
        </div>

    </div>
  </div>
</div>
